"use strict";$(document).ready(function(){var e={ignore:'.ignore, [type="hidden"]'};$.validator.setDefaults({debug:!0}),$.extend($.validator.messages,{required:"Это обязательное поле",email:"Неверный формат данных",tel:"Неверный формат данных",date:"Пожалуйста, введите корректную дату.",number:"Пожалуйста, введите число.",equalTo:"Пароли не совпадают"}),$.validator.addMethod("max-length",function(e,t,a){return e.length<=a},"Введите не более 140 символов"),$.validator.addMethod("js-tel-input",function(e,t){if(16==e.trim().length)return!0},"Пожалуйста, введите не менее 12 символов"),$.validator.addMethod("js-mask-tel",function(e,t,a){return e.indexOf("_")==-1},"Неверный формат данных"),$.validator.addMethod("js-valid-text",function(e,t){if(""!=e.trim())return!0},"Неверный формат данных"),$.validator.addMethod("js-regex",function(e,t){if(""!=e.trim())return this.optional(t)||/^[a-zA-Zа-яА-ЯЁё ]+$/.test(e)},"Только буквы"),$.validator.addMethod("js-valid-date",function(e,t){var a,n=new Date,r=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),i=e.split("."),o=new Date(i[2]+"/"+i[1]+"/"+i[0]);return a=i[2]==o.getFullYear()&&i[1]==o.getMonth()+1&&i[0]==o.getDate()&&Date.parse(r)<=Date.parse(o),this.optional(t)||a},"Некорректная дата");var t;$.validator.addMethod("js-remote-email",function(e,t){var a=!1;return $.ajax({url:$("[data-remote-email]").data("remote-email"),data:{value:e},async:!1,success:function(e){a=e}}),a},"E-mail уже занят"),$.validator.addMethod("js-remote-phone",function(e,t){var a=!1;return $.ajax({url:$(t).data("remote-phone"),data:{value:e},async:!1,success:function(e){a=e}}),a},"Телефон уже занят"),$.validator.addMethod("max-message",function(e,t){return this.optional(t)||/(?=.*[0-9])(?=.*[a-z])(?=.*[A-Z])[0-9a-zA-Z!@#$%^&*]{6,}/i.test(e)},"Пароль должен содержать не менее 6 символов, в том числе цифры и буквы латинского алфавита"),$.validator.addMethod("js-remote-subscribe",function(e,t){var a=!1;return $.ajax({url:$(t).data("remote-subscribe"),data:{value:e},async:!1,success:function(e){a=e}}),a},"Данный E-mail уже участвует в рассылке"),$.validator.addMethod("filereqired",function(e,t,a){return"file"===$(t).attr("type")&&t.files&&t.files.length},"Файл не добавлен"),$.validator.addMethod("extension",function(e,t,a){if(a="string"==typeof a?a.replace(/,/g,"|"):"png|jpe?g|gif","file"===$(t).attr("type")&&t.files&&t.files.length)for(var n=0;n<t.files.length;n++)return this.optional(t)||t.files[n].name.match(new RegExp("\\.("+a+")$","i"));return!0},$.validator.format("")),$.validator.addMethod("maxsize",function(e,t,a){if(this.optional(t))return!0;if(a=1024*a,"file"===$(t).attr("type")&&t.files&&t.files.length)for(var n=0;n<t.files.length;n++)return t.files[n].size<=a;return!0},""),$.validator.addMethod("enter-email",function(e,t){return this.optional(t)||/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(e)||/^(\+7|7|8)?[\s\-]?\(?[489][0-9]{2}\)?[\s\-]?[0-9]{3}[\s\-]?[0-9]{2}[\s\-]?[0-9]{2}$/.test(e)},"Неверный формат данных"),$("body").on("initValidation",function(){$(".js-form-validate").each(function(){var a=$(this),n={};a.hasClass("js-order-unregistered-form")&&(n={focusInvalid:!0,errorPlacement:function(e,t){e.insertAfter(t)}});var r=$.extend(n,e);a.data("error-selector")&&(r.errorLabelContainer=a.data("error-selector"));var i=a.validate(r),o=a.find("input.js-remote-subscribe, input.js-remote-user, input.js-remote-phone, input.js-remote-email");o.on("keydown",function(){var e=$(this);e.addClass("ignore")}).on("keyup",function(){clearTimeout(t);var e=this;t=setTimeout(function(){o.removeClass("ignore"),i.element(e)},1e3)}),a.hasClass("js-order-unregistered-form")&&setTimeout(function(){i=a.validate(r)},5e3),a.on("reset",function(e){i.resetForm()}),a.on("submit",function(e){if(i.numberOfInvalids()>0)e.stopImmediatePropagation();else{var t=a,n=t.attr("action")||location.href,r=t.attr("method"),e=t.data("event"),o=new FormData(a[0]);$.ajax({url:n,method:r,processData:!1,contentType:!1,data:o,success:function(){var e=$("div[data-popup~='success']");e.addClass("open"),a[0].reset()},error:function(){var e=$("div[data-popup~='error']");e.addClass("open"),a[0].reset()}})}}),a.find(".js-licence-accept").on("change",function(e){var t=a.find('button[type="submit"]');e.target.checked?t.removeClass("disabled"):t.addClass("disabled")}),a.find(".js-check-form").on("click",function(e){var t=$(this);i.numberOfInvalids()||(i.form(),a.valid(),setTimeout(function(){0==i.numberOfInvalids()&&t.trigger("popup.onOpen")},1e3))}),$(".js-simple-select").on("select2:select",function(){i.element(this)})})}),$("body").trigger("initValidation")});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBhcnRpYWxzL3ZhbGlkYXRpb24uanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJTRVRUSU5HUyIsImlnbm9yZSIsInZhbGlkYXRvciIsInNldERlZmF1bHRzIiwiZGVidWciLCJleHRlbmQiLCJtZXNzYWdlcyIsInJlcXVpcmVkIiwiZW1haWwiLCJ0ZWwiLCJkYXRlIiwibnVtYmVyIiwiZXF1YWxUbyIsImFkZE1ldGhvZCIsInZhbHVlIiwiZWxlbWVudCIsInBhcmFtcyIsImxlbmd0aCIsInRyaW0iLCJpbmRleE9mIiwidGhpcyIsIm9wdGlvbmFsIiwidGVzdCIsIiRyZXN1bHQiLCJub3ciLCJEYXRlIiwibm93RGF0ZSIsImdldEZ1bGxZZWFyIiwiZ2V0TW9udGgiLCJnZXREYXRlIiwiZF9hcnIiLCJzcGxpdCIsImQiLCJwYXJzZSIsImNoZWNraW5nIiwiaXNTdWNjZXNzIiwiYWpheCIsInVybCIsImRhdGEiLCJhc3luYyIsInN1Y2Nlc3MiLCJtc2ciLCJhdHRyIiwiZmlsZXMiLCJwYXJhbSIsInJlcGxhY2UiLCJpIiwibmFtZSIsIm1hdGNoIiwiUmVnRXhwIiwiZm9ybWF0Iiwic2l6ZSIsIm9uIiwiZWFjaCIsIiR0aGlzIiwibG9jYWxTZXR0aW5ncyIsImhhc0NsYXNzIiwiZm9jdXNJbnZhbGlkIiwiZXJyb3JQbGFjZW1lbnQiLCJlcnJvciIsImluc2VydEFmdGVyIiwic2V0dGluZ3MiLCJlcnJvckxhYmVsQ29udGFpbmVyIiwidmFsaWRhdGUiLCIkcmVtb3RlIiwiZmluZCIsImFkZENsYXNzIiwiY2xlYXJUaW1lb3V0IiwiX3RoaXMiLCJzZXRUaW1lb3V0IiwicmVtb3ZlQ2xhc3MiLCJldmVudCIsInJlc2V0Rm9ybSIsIm51bWJlck9mSW52YWxpZHMiLCJzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24iLCIkZm9ybSIsImxvY2F0aW9uIiwiaHJlZiIsIm1ldGhvZCIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJwcm9jZXNzRGF0YSIsImNvbnRlbnRUeXBlIiwicG9wdXAiLCJyZXNldCIsImUiLCIkYnV0dG9uIiwidGFyZ2V0IiwiY2hlY2tlZCIsIiR0aGF0IiwiZm9ybSIsInZhbGlkIiwidHJpZ2dlciJdLCJtYXBwaW5ncyI6IkFBQUEsWUFFQUEsR0FBRUMsVUFBVUMsTUFBTSxXQUNoQixHQUFJQyxJQUNGQyxPQUFRLDJCQUVWSixHQUFFSyxVQUFVQyxhQUNWQyxPQUFPLElBRVRQLEVBQUVRLE9BQU9SLEVBQUVLLFVBQVVJLFVBQ25CQyxTQUFVLHdCQUNWQyxNQUFPLHlCQUNQQyxJQUFLLHlCQUVMQyxLQUFNLHVDQUNOQyxPQUFRLDZCQUdSQyxRQUFTLHdCQVFYZixFQUFFSyxVQUFVVyxVQUFVLGFBQWMsU0FBVUMsRUFBT0MsRUFBU0MsR0FDNUQsTUFBT0YsR0FBTUcsUUFBVUQsR0FDdEIsaUNBQ0huQixFQUFFSyxVQUFVVyxVQUFVLGVBQWdCLFNBQVVDLEVBQU9DLEdBQ3JELEdBQTJCLElBQXZCRCxFQUFNSSxPQUFPRCxPQUNmLE9BQU8sR0FFUiw0Q0FDSHBCLEVBQUVLLFVBQVVXLFVBQVUsY0FBZSxTQUFVQyxFQUFPQyxFQUFTQyxHQUM3RCxNQUFPRixHQUFNSyxRQUFRLFVBQ3BCLDBCQUNIdEIsRUFBRUssVUFBVVcsVUFBVSxnQkFBaUIsU0FBVUMsRUFBT0MsR0FDdEQsR0FBb0IsSUFBaEJELEVBQU1JLE9BQ1IsT0FBTyxHQUVSLDBCQUNIckIsRUFBRUssVUFBVVcsVUFBVSxXQUFZLFNBQVVDLEVBQU9DLEdBQ2pELEdBQW9CLElBQWhCRCxFQUFNSSxPQUNSLE1BQU9FLE1BQUtDLFNBQVNOLElBQVksdUJBQXVCTyxLQUFLUixJQUU5RCxnQkFDSGpCLEVBQUVLLFVBQVVXLFVBQVUsZ0JBQWlCLFNBQVVDLEVBQU9DLEdBQ3RELEdBRUlRLEdBRkFDLEVBQU0sR0FBSUMsTUFDVkMsRUFBVUYsRUFBSUcsY0FBZ0IsS0FBT0gsRUFBSUksV0FBYSxHQUFLLElBQU1KLEVBQUlLLFVBRXJFQyxFQUFRaEIsRUFBTWlCLE1BQU0sS0FDcEJDLEVBQUks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QUFNakIsU0FBUyxRQUNmWixFQUFNLEdBQUc4QixTQUVYekIsTUFBTyxXQUNMLEdBQUl3QixHQUFRdEYsRUFBRSwyQkFDZHNGLEdBQU1qQixTQUFTLFFBQ2ZaLEVBQU0sR0FBRzhCLGNBS2pCOUIsRUFBTVcsS0FBSyxzQkFBc0JiLEdBQUcsU0FBVSxTQUFVaUMsR0FDdEQsR0FBSUMsR0FBVWhDLEVBQU1XLEtBQUssd0JBRXJCb0IsR0FBRUUsT0FBT0MsUUFDWEYsRUFBUWhCLFlBQVksWUFFcEJnQixFQUFRcEIsU0FBUyxjQUdyQlosRUFBTVcsS0FBSyxrQkFBa0JiLEdBQUcsUUFBUyxTQUFVbUIsR0FDakQsR0FBSWtCLEdBQVE1RixFQUFFdUIsS0FFVmxCLEdBQVV1RSxxQkFJZHZFLEVBQVV3RixPQUNWcEMsRUFBTXFDLFFBQ050QixXQUFXLFdBQzJCLEdBQWhDbkUsRUFBVXVFLG9CQUNaZ0IsRUFBTUcsUUFBUSxpQkFFZixRQUVML0YsRUFBRSxxQkFBcUJ1RCxHQUFHLGlCQUFrQixXQUMxQ2xELEVBQVVhLFFBQVFLLFlBSXhCdkIsRUFBRSxRQUFRK0YsUUFBUSIsImZpbGUiOiJwYXJ0aWFscy92YWxpZGF0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiXCJ1c2Ugc3RyaWN0XCI7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgdmFyIFNFVFRJTkdTID0ge1xuICAgIGlnbm9yZTogJy5pZ25vcmUsIFt0eXBlPVwiaGlkZGVuXCJdJ1xuICB9O1xuICAkLnZhbGlkYXRvci5zZXREZWZhdWx0cyh7XG4gICAgZGVidWc6IHRydWVcbiAgfSk7XG4gICQuZXh0ZW5kKCQudmFsaWRhdG9yLm1lc3NhZ2VzLCB7XG4gICAgcmVxdWlyZWQ6IFwi0K3RgtC+INC+0LHRj9C30LDRgtC10LvRjNC90L7QtSDQv9C+0LvQtVwiLFxuICAgIGVtYWlsOiBcItCd0LXQstC10YDQvdGL0Lkg0YTQvtGA0LzQsNGCINC00LDQvdC90YvRhVwiLFxuICAgIHRlbDogXCLQndC10LLQtdGA0L3Ri9C5INGE0L7RgNC80LDRgiDQtNCw0L3QvdGL0YVcIixcbiAgICAvLyB1cmw6ICfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0LrQvtGA0YDQtdC60YLQvdGL0LkgVVJMLicsXG4gICAgZGF0ZTogXCLQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0LrQvtGA0YDQtdC60YLQvdGD0Y4g0LTQsNGC0YMuXCIsXG4gICAgbnVtYmVyOiBcItCf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDRh9C40YHQu9C+LlwiLFxuICAgIC8vIGRpZ2l0czogJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0L7QtNC40YLQtSDRgtC+0LvRjNC60L4g0YbQuNGE0YDRiy4nLFxuICAgIC8vIGNyZWRpdGNhcmQ6ICfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0L/RgNCw0LLQuNC70YzQvdGL0Lkg0L3QvtC80LXRgCDQutGA0LXQtNC40YLQvdC+0Lkg0LrQsNGA0YLRiy4nLFxuICAgIGVxdWFsVG86IFwi0J/QsNGA0L7Qu9C4INC90LUg0YHQvtCy0L/QsNC00LDRjtGCXCIgLy9tYXhsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INC90LUg0LHQvtC70YzRiNC1IHswfSDRgdC40LzQstC+0LvQvtCyLicpLFxuICAgIC8vIG1pbmxlbmd0aDogJC52YWxpZGF0b3IuZm9ybWF0KCfQn9C+0LbQsNC70YPQudGB0YLQsCwg0LLQstC10LTQuNGC0LUg0L3QtSDQvNC10L3RjNGI0LUgezB9INGB0LjQvNCy0L7Qu9C+0LIuJyksXG4gICAgLy8gcmFuZ2VsZW5ndGg6ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INC30L3QsNGH0LXQvdC40LUg0LTQu9C40L3QvtC5INC+0YIgezB9INC00L4gezF9INGB0LjQvNCy0L7Qu9C+0LIuJyksXG4gICAgLy8gcmFuZ2U6ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INGH0LjRgdC70L4g0L7RgiB7MH0g0LTQviB7MX0uJyksXG4gICAgLy8gbWF4OiAkLnZhbGlkYXRvci5mb3JtYXQoJ9Cf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDRh9C40YHQu9C+LCDQvNC10L3RjNGI0LXQtSDQuNC70Lgg0YDQsNCy0L3QvtC1IHswfS4nKSxcbiAgICAvLyBtaW46ICQudmFsaWRhdG9yLmZvcm1hdCgn0J/QvtC20LDQu9GD0LnRgdGC0LAsINCy0LLQtdC00LjRgtC1INGH0LjRgdC70L4sINCx0L7Qu9GM0YjQtdC1INC40LvQuCDRgNCw0LLQvdC+0LUgezB9LicpXG5cbiAgfSk7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcIm1heC1sZW5ndGhcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gdmFsdWUubGVuZ3RoIDw9IHBhcmFtcztcbiAgfSwgXCLQktCy0LXQtNC40YLQtSDQvdC1INCx0L7Qu9C10LUgMTQwINGB0LjQvNCy0L7Qu9C+0LJcIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImpzLXRlbC1pbnB1dFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAodmFsdWUudHJpbSgpLmxlbmd0aCA9PSAxNikge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9LCBcItCf0L7QttCw0LvRg9C50YHRgtCwLCDQstCy0LXQtNC40YLQtSDQvdC1INC80LXQvdC10LUgMTIg0YHQuNC80LLQvtC70L7QslwiKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwianMtbWFzay10ZWxcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50LCBwYXJhbXMpIHtcbiAgICByZXR1cm4gdmFsdWUuaW5kZXhPZignXycpID09IC0xO1xuICB9LCBcItCd0LXQstC10YDQvdGL0Lkg0YTQvtGA0LzQsNGCINC00LDQvdC90YvRhVwiKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwianMtdmFsaWQtdGV4dFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAodmFsdWUudHJpbSgpICE9ICcnKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH0sIFwi0J3QtdCy0LXRgNC90YvQuSDRhNC+0YDQvNCw0YIg0LTQsNC90L3Ri9GFXCIpO1xuICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJqcy1yZWdleFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICBpZiAodmFsdWUudHJpbSgpICE9ICcnKSB7XG4gICAgICByZXR1cm4gdGhpcy5vcHRpb25hbChlbGVtZW50KSB8fCAvXlthLXpBLVrQsC3Rj9CQLdCv0IHRkSBdKyQvLnRlc3QodmFsdWUpO1xuICAgIH1cbiAgfSwgXCLQotC+0LvRjNC60L4g0LHRg9C60LLRi1wiKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwianMtdmFsaWQtZGF0ZVwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICB2YXIgbm93ID0gbmV3IERhdGUoKTtcbiAgICB2YXIgbm93RGF0ZSA9IG5vdy5nZXRGdWxsWWVhcigpICsgJy0nICsgKG5vdy5nZXRNb250aCgpICsgMSkgKyAnLScgKyBub3cuZ2V0RGF0ZSgpO1xuICAgIHZhciAkcmVzdWx0O1xuICAgIHZhciBkX2FyciA9IHZhbHVlLnNwbGl0KCcuJyk7XG4gICAgdmFyIGQgPSBuZXcgRGF0ZShkX2FyclsyXSArICcvJyArIGRfYXJyWzFdICsgJy8nICsgZF9hcnJbMF0gKyAnJyk7IC8vINC00LDRgtCwINCyINGE0L7RgNC80LDRgtC1IDIwMTQvMTIvMzFcblxuICAgIGlmIChkX2FyclsyXSAhPSBkLmdldEZ1bGxZZWFyKCkgfHwgZF9hcnJbMV0gIT0gZC5nZXRNb250aCgpICsgMSB8fCBkX2FyclswXSAhPSBkLmdldERhdGUoKSkge1xuICAgICAgJHJlc3VsdCA9IGZhbHNlOyAvLyDQvdC10LrQutC+0YDQtdC60YLQvdCw0Y8g0LTQsNGC0LBcbiAgICB9IGVsc2UgaWYgKERhdGUucGFyc2Uobm93RGF0ZSkgPD0gRGF0ZS5wYXJzZShkKSkge1xuICAgICAgJHJlc3VsdCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgICRyZXN1bHQgPSBmYWxzZTsgLy8g0L3QtdC60LrQvtGA0LXQutGC0L3QsNGPINC00LDRgtCwXG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgJHJlc3VsdDtcbiAgfSwgXCLQndC10LrQvtGA0YDQtdC60YLQvdCw0Y8g0LTQsNGC0LBcIik7XG4gIHZhciBjaGVja2luZztcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwianMtcmVtb3RlLWVtYWlsXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCkge1xuICAgIHZhciBpc1N1Y2Nlc3MgPSBmYWxzZTtcbiAgICAkLmFqYXgoe1xuICAgICAgdXJsOiAkKFwiW2RhdGEtcmVtb3RlLWVtYWlsXVwiKS5kYXRhKFwicmVtb3RlLWVtYWlsXCIpLFxuICAgICAgZGF0YToge1xuICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgIH0sXG4gICAgICBhc3luYzogZmFsc2UsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKG1zZykge1xuICAgICAgICBpc1N1Y2Nlc3MgPSBtc2c7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGlzU3VjY2VzcztcbiAgfSwgXCJFLW1haWwg0YPQttC1INC30LDQvdGP0YJcIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImpzLXJlbW90ZS1waG9uZVwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQpIHtcbiAgICB2YXIgaXNTdWNjZXNzID0gZmFsc2U7XG4gICAgJC5hamF4KHtcbiAgICAgIHVybDogJChlbGVtZW50KS5kYXRhKFwicmVtb3RlLXBob25lXCIpLFxuICAgICAgZGF0YToge1xuICAgICAgICB2YWx1ZTogdmFsdWVcbiAgICAgIH0sXG4gICAgICBhc3luYzogZmFsc2UsXG4gICAgICBzdWNjZXNzOiBmdW5jdGlvbiBzdWNjZXNzKG1zZykge1xuICAgICAgICBpc1N1Y2Nlc3MgPSBtc2c7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIGlzU3VjY2VzcztcbiAgfSwgXCLQotC10LvQtdGE0L7QvSDRg9C20LUg0LfQsNC90Y/RglwiKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwibWF4LW1lc3NhZ2VcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgLyg/PS4qWzAtOV0pKD89LipbYS16XSkoPz0uKltBLVpdKVswLTlhLXpBLVohQCMkJV4mKl17Nix9L2kudGVzdCh2YWx1ZSk7XG4gIH0sIFwi0J/QsNGA0L7Qu9GMINC00L7Qu9C20LXQvSDRgdC+0LTQtdGA0LbQsNGC0Ywg0L3QtSDQvNC10L3QtdC1IDYg0YHQuNC80LLQvtC70L7Qsiwg0LIg0YLQvtC8INGH0LjRgdC70LUg0YbQuNGE0YDRiyDQuCDQsdGD0LrQstGLINC70LDRgtC40L3RgdC60L7Qs9C+INCw0LvRhNCw0LLQuNGC0LBcIik7XG4gICQudmFsaWRhdG9yLmFkZE1ldGhvZChcImpzLXJlbW90ZS1zdWJzY3JpYmVcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgdmFyIGlzU3VjY2VzcyA9IGZhbHNlO1xuICAgICQuYWpheCh7XG4gICAgICB1cmw6ICQoZWxlbWVudCkuZGF0YShcInJlbW90ZS1zdWJzY3JpYmVcIiksXG4gICAgICBkYXRhOiB7XG4gICAgICAgIHZhbHVlOiB2YWx1ZVxuICAgICAgfSxcbiAgICAgIGFzeW5jOiBmYWxzZSxcbiAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MobXNnKSB7XG4gICAgICAgIGlzU3VjY2VzcyA9IG1zZztcbiAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gaXNTdWNjZXNzO1xuICB9LCBcItCU0LDQvdC90YvQuSBFLW1haWwg0YPQttC1INGD0YfQsNGB0YLQstGD0LXRgiDQsiDRgNCw0YHRgdGL0LvQutC1XCIpO1xuICAkLnZhbGlkYXRvci5hZGRNZXRob2QoXCJmaWxlcmVxaXJlZFwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQsIHBhcmFtcykge1xuICAgIHJldHVybiAkKGVsZW1lbnQpLmF0dHIoXCJ0eXBlXCIpID09PSBcImZpbGVcIiAmJiBlbGVtZW50LmZpbGVzICYmIGVsZW1lbnQuZmlsZXMubGVuZ3RoO1xuICB9LCBcItCk0LDQudC7INC90LUg0LTQvtCx0LDQstC70LXQvVwiKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwiZXh0ZW5zaW9uXCIsIGZ1bmN0aW9uICh2YWx1ZSwgZWxlbWVudCwgcGFyYW0pIHtcbiAgICBwYXJhbSA9IHR5cGVvZiBwYXJhbSA9PT0gXCJzdHJpbmdcIiA/IHBhcmFtLnJlcGxhY2UoLywvZywgXCJ8XCIpIDogXCJwbmd8anBlP2d8Z2lmXCI7XG5cbiAgICBpZiAoJChlbGVtZW50KS5hdHRyKFwidHlwZVwiKSA9PT0gXCJmaWxlXCIgJiYgZWxlbWVudC5maWxlcyAmJiBlbGVtZW50LmZpbGVzLmxlbmd0aCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtZW50LmZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIHJldHVybiB0aGlzLm9wdGlvbmFsKGVsZW1lbnQpIHx8IGVsZW1lbnQuZmlsZXNbaV0ubmFtZS5tYXRjaChuZXcgUmVnRXhwKFwiXFxcXC4oXCIgKyBwYXJhbSArIFwiKSRcIiwgXCJpXCIpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSwgJC52YWxpZGF0b3IuZm9ybWF0KFwiXCIpKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwibWF4c2l6ZVwiLCBmdW5jdGlvbiAodmFsdWUsIGVsZW1lbnQsIHBhcmFtKSB7XG4gICAgaWYgKHRoaXMub3B0aW9uYWwoZWxlbWVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIHBhcmFtID0gcGFyYW0gKiAxMDI0O1xuXG4gICAgaWYgKCQoZWxlbWVudCkuYXR0cihcInR5cGVcIikgPT09IFwiZmlsZVwiICYmIGVsZW1lbnQuZmlsZXMgJiYgZWxlbWVudC5maWxlcy5sZW5ndGgpIHtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudC5maWxlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZXR1cm4gZWxlbWVudC5maWxlc1tpXS5zaXplIDw9IHBhcmFtO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9LCBcIlwiKTtcbiAgJC52YWxpZGF0b3IuYWRkTWV0aG9kKFwiZW50ZXItZW1haWxcIiwgZnVuY3Rpb24gKHZhbHVlLCBlbGVtZW50KSB7XG4gICAgcmV0dXJuIHRoaXMub3B0aW9uYWwoZWxlbWVudCkgfHwgL15bYS16QS1aMC05LiEjJCUmJyorXFwvPT9eX2B7fH1+LV0rQFthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPyg/OlxcLlthLXpBLVowLTldKD86W2EtekEtWjAtOS1dezAsNjF9W2EtekEtWjAtOV0pPykqJC8udGVzdCh2YWx1ZSkgfHwgL14oXFwrN3w3fDgpP1tcXHNcXC1dP1xcKD9bNDg5XVswLTldezJ9XFwpP1tcXHNcXC1dP1swLTldezN9W1xcc1xcLV0/WzAtOV17Mn1bXFxzXFwtXT9bMC05XXsyfSQvLnRlc3QodmFsdWUpO1xuICB9LCBcItCd0LXQstC10YDQvdGL0Lkg0YTQvtGA0LzQsNGCINC00LDQvdC90YvRhVwiKTtcbiAgJChcImJvZHlcIikub24oXCJpbml0VmFsaWRhdGlvblwiLCBmdW5jdGlvbiAoKSB7XG4gICAgJChcIi5qcy1mb3JtLXZhbGlkYXRlXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIHZhciBsb2NhbFNldHRpbmdzID0ge307XG5cbiAgICAgIGlmICgkdGhpcy5oYXNDbGFzcyhcImpzLW9yZGVyLXVucmVnaXN0ZXJlZC1mb3JtXCIpKSB7XG4gICAgICAgIGxvY2FsU2V0dGluZ3MgPSB7XG4gICAgICAgICAgZm9jdXNJbnZhbGlkOiB0cnVlLFxuICAgICAgICAgIGVycm9yUGxhY2VtZW50OiBmdW5jdGlvbiBlcnJvclBsYWNlbWVudChlcnJvciwgZWxlbWVudCkge1xuICAgICAgICAgICAgZXJyb3IuaW5zZXJ0QWZ0ZXIoZWxlbWVudCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICB2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZChsb2NhbFNldHRpbmdzLCBTRVRUSU5HUyk7XG5cbiAgICAgIGlmICgkdGhpcy5kYXRhKFwiZXJyb3Itc2VsZWN0b3JcIikpIHtcbiAgICAgICAgc2V0dGluZ3MuZXJyb3JMYWJlbENvbnRhaW5lciA9ICR0aGlzLmRhdGEoXCJlcnJvci1zZWxlY3RvclwiKTtcbiAgICAgIH1cblxuICAgICAgdmFyIHZhbGlkYXRvciA9ICR0aGlzLnZhbGlkYXRlKHNldHRpbmdzKTtcbiAgICAgIHZhciAkcmVtb3RlID0gJHRoaXMuZmluZChcImlucHV0LmpzLXJlbW90ZS1zdWJzY3JpYmUsIGlucHV0LmpzLXJlbW90ZS11c2VyLCBpbnB1dC5qcy1yZW1vdGUtcGhvbmUsIGlucHV0LmpzLXJlbW90ZS1lbWFpbFwiKTtcbiAgICAgICRyZW1vdGUub24oXCJrZXlkb3duXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgJHRoaXMuYWRkQ2xhc3MoXCJpZ25vcmVcIik7XG4gICAgICB9KS5vbihcImtleXVwXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KGNoZWNraW5nKTtcblxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICAgIGNoZWNraW5nID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHJlbW90ZS5yZW1vdmVDbGFzcyhcImlnbm9yZVwiKTtcbiAgICAgICAgICB2YWxpZGF0b3IuZWxlbWVudChfdGhpcyk7XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfSk7XG5cbiAgICAgIGlmICgkdGhpcy5oYXNDbGFzcyhcImpzLW9yZGVyLXVucmVnaXN0ZXJlZC1mb3JtXCIpKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHZhbGlkYXRvciA9ICR0aGlzLnZhbGlkYXRlKHNldHRpbmdzKTtcbiAgICAgICAgfSwgNTAwMCk7XG4gICAgICB9XG5cbiAgICAgICR0aGlzLm9uKFwicmVzZXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIHZhbGlkYXRvci5yZXNldEZvcm0oKTtcbiAgICAgIH0pO1xuICAgICAgJHRoaXMub24oXCJzdWJtaXRcIiwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIGlmICh2YWxpZGF0b3IubnVtYmVyT2ZJbnZhbGlkcygpID4gMCkge1xuICAgICAgICAgIGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciAkZm9ybSA9ICR0aGlzO1xuICAgICAgICAgIHZhciB1cmwgPSAkZm9ybS5hdHRyKFwiYWN0aW9uXCIpIHx8IGxvY2F0aW9uLmhyZWY7XG4gICAgICAgICAgdmFyIG1ldGhvZCA9ICRmb3JtLmF0dHIoXCJtZXRob2RcIik7XG4gICAgICAgICAgdmFyIGV2ZW50ID0gJGZvcm0uZGF0YShcImV2ZW50XCIpO1xuICAgICAgICAgIHZhciBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YSgkdGhpc1swXSk7XG4gICAgICAgICAgJC5hamF4KHtcbiAgICAgICAgICAgIHVybDogdXJsLFxuICAgICAgICAgICAgbWV0aG9kOiBtZXRob2QsXG4gICAgICAgICAgICBwcm9jZXNzRGF0YTogZmFsc2UsXG4gICAgICAgICAgICBjb250ZW50VHlwZTogZmFsc2UsXG4gICAgICAgICAgICBkYXRhOiBmb3JtRGF0YSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIHN1Y2Nlc3MoKSB7XG4gICAgICAgICAgICAgIHZhciBwb3B1cCA9ICQoXCJkaXZbZGF0YS1wb3B1cH49J3N1Y2Nlc3MnXVwiKTtcbiAgICAgICAgICAgICAgcG9wdXAuYWRkQ2xhc3MoJ29wZW4nKTtcbiAgICAgICAgICAgICAgJHRoaXNbMF0ucmVzZXQoKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gZXJyb3IoKSB7XG4gICAgICAgICAgICAgIHZhciBwb3B1cCA9ICQoXCJkaXZbZGF0YS1wb3B1cH49J2Vycm9yJ11cIik7XG4gICAgICAgICAgICAgIHBvcHVwLmFkZENsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICAgICR0aGlzWzBdLnJlc2V0KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgJHRoaXMuZmluZChcIi5qcy1saWNlbmNlLWFjY2VwdFwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICB2YXIgJGJ1dHRvbiA9ICR0aGlzLmZpbmQoJ2J1dHRvblt0eXBlPVwic3VibWl0XCJdJyk7XG5cbiAgICAgICAgaWYgKGUudGFyZ2V0LmNoZWNrZWQpIHtcbiAgICAgICAgICAkYnV0dG9uLnJlbW92ZUNsYXNzKFwiZGlzYWJsZWRcIik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJGJ1dHRvbi5hZGRDbGFzcyhcImRpc2FibGVkXCIpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgICR0aGlzLmZpbmQoXCIuanMtY2hlY2stZm9ybVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICB2YXIgJHRoYXQgPSAkKHRoaXMpO1xuXG4gICAgICAgIGlmICh2YWxpZGF0b3IubnVtYmVyT2ZJbnZhbGlkcygpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFsaWRhdG9yLmZvcm0oKTtcbiAgICAgICAgJHRoaXMudmFsaWQoKTtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKHZhbGlkYXRvci5udW1iZXJPZkludmFsaWRzKCkgPT0gMCkge1xuICAgICAgICAgICAgJHRoYXQudHJpZ2dlcihcInBvcHVwLm9uT3BlblwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDEwMDApO1xuICAgICAgfSk7XG4gICAgICAkKCcuanMtc2ltcGxlLXNlbGVjdCcpLm9uKCdzZWxlY3QyOnNlbGVjdCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFsaWRhdG9yLmVsZW1lbnQodGhpcyk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG4gICQoXCJib2R5XCIpLnRyaWdnZXIoXCJpbml0VmFsaWRhdGlvblwiKTtcbn0pOyJdfQ==
